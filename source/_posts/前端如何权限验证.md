---
title: 前端实现权限验证
tags: 
  - Javascript, 
  - 鉴权
---

## 前端实现权限验证

前端在做权限验证时候的一些思路。

<!-- more -->

大体思路：

### 首次进入

进入页面前，获取token，执行下面逻辑：
- 已登录：如果能正常获取到，那么可以认为已经有登录token。ajax请求携带此token请求数据，服务端自行判断此token是否过期。过期则返回`401`，ajax拦截`response`，将`401`的相应重定向至登录页，否则进入页面。
- 未登录：未能正常获取用户token，认为用户未登录，跳转用户登录


### 用户登录

登录页面用户输入相关信息，登录成功后，将`response`返回的token，记入storage，这里用的是storage，不能设置过期时间，与cookie不同，所以过期与否需要服务端验证。


### 权限列表

对用户的权限控制分为页面控制，模块控制，控件控制。

- 页面控制：需要提前配置用户组，不同的用户组拥有不同的页面权限。在首次登陆成功后，服务需要将用户所在权限组规则下发，用以生成对应的菜单。
- 模块控制：服务端提供接口
- 控件控制：服务端提供接口

